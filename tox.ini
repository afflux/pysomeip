[tox]
envlist = py38, flake8, mypy, coverage
isolated_build = true
isolated_build_env = py3

[testenv]
passenv = CI
deps =
    coverage[toml]>=5.1
commands =
    python -m coverage run -m unittest discover -s tests/ {posargs}

[testenv:flake8]
basepython = python3.8
skip_install = true
deps =
    flake8
    flake8-bugbear
    flake8-colors
    pep8-naming
commands =
    flake8 src/ tests/

[testenv:coverage]
basepython = python3.8
skip_install = true
deps =
    coverage[toml]>=5.1
commands =
    python -m coverage report
    python -m coverage xml
    python -m coverage html

[testenv:mypy]
basepython = python3.8
skip_install = true
deps =
    mypy
commands =
    mypy --show-error-codes src/ tools/

[testenv:docs]
basepython = python3.8
deps =
    sphinx
commands =
    sphinx-build {posargs:-E} -b html docs dist/docs
